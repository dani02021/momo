<html>
<head>
<title>Qgodi</title>
</head>
<body>
<label for="k">k:</label><br>
<input id="k" type="number" placeholder="k"><br>
<label for="l">l:</label><br>
<input id="l" type="number" placeholder="l"><br>
<label for="r">r:</label><br>
<input id="r" type="number" placeholder="r"><br>
<label for="gn1">gnila1:</label><br>
<input id="gn1" type="text" placeholder="gnila1 coordinates (2d)"><br>
<label for="gn2">gnila2:</label><br>
<input id="gn2" type="text" placeholder="gnila2 coordinates (2d)"><br><br>
<button type="button" id="btn">Generate</button><br><br>
<label id="count" type="number">Count: 0</label><br><br>
<canvas id="grid" width="10000" height="10000"></canvas>

<script>
canvas = document.getElementById('grid')
ctx = canvas.getContext('2d')
document.getElementById("btn").onclick = function() {
    ctx.clearRect(0, 0, canvas.width, canvas.height)

    k = document.getElementById("k").value
    l = document.getElementById("l").value
    r = document.getElementById("r").value
    gn1 = document.getElementById("gn1").value
    gn2 = document.getElementById("gn2").value

    qgodi = new Array(parseInt(k))

    for(i = 0; i < k; i++) {
        qgodi[i] = new Array(parseInt(l))
    }

    count = calcCount(k, l, r, gn1, gn2, qgodi)

    radius = 20
    diameter = radius * 2
    offset = 3
    x = 30
    y = 30

    for(row = 1; row <= k; row++) {
        for(col = 1; col <= l; col++) {
            ctx.beginPath()
            ctx.arc(x, y, radius, 0, 2 * Math.PI, false)
            if(qgodi[row - 1][col - 1] > 0) {
                ctx.fillStyle = rgbToHex(255 - (255 / qgodi[row - 1][col - 1]), 255 - (255 / qgodi[row - 1][col - 1]), 255 - (255 / qgodi[row - 1][col - 1]))
                ctx.fill()
            }
            x += diameter + offset
            
            ctx.lineWidth = 2;
            ctx.stroke();
            
            ctx.moveTo( x + radius, y )
        }

        x = 30
        y += diameter + offset
        ctx.moveTo(x + radius, y)
    }

    document.getElementById("count").innerHTML = 'Count: ' + count
}

function calcCount(k, l, r, gnila1, gnila2, qgodi = null) {
    k = parseInt(k)
	l = parseInt(l)
	r = parseInt(r)

    if(qgodi == null) {
        qgodi = new Array(k)

        for(i = 0; i < k; i++) {
            qgodi[i] = new Array(l)
        }
    }
		
	if(gnila2 != '') {
		qgodi[k - parseInt(gnila2.split(" ")[0])]
				[parseInt(gnila2.split(" ")[1]) - 1] = 1
	}
		
	qgodi[k - parseInt(gnila1.split(" ")[0])]
			[parseInt(gnila1.split(" ")[1]) - 1] = 1
    

	for(i = 1; i <= r; i++) {
		for(row = 0; row < k; row++) {
			for(col = 0; col < l; col++) {
                if(qgodi[row][col] === undefined) {
                    qgodi[row][col] = 0
                }

				if(qgodi[row][col] == i) {
					if(row > 0) {
						if(!Boolean(qgodi[row - 1][col]))
							qgodi[row - 1][col] = i+1
					}
					if(row < k-1) {
						if(!Boolean(qgodi[row + 1][col]))
							qgodi[row + 1][col] = i+1
					}
					if(col > 0) {
						if(!Boolean(qgodi[row][col - 1]))
							qgodi[row][col - 1] = i+1
					}
					if(col < l-1) {
						if(!Boolean(qgodi[row][col + 1]))
							qgodi[row][col + 1] = i+1
					}
				}
			}
		}
	}
	
	// Get result
	count = 0;
	
	for(row = 0; row < k; row++) {
		for(col = 0; col < l; col++) {
			if(qgodi[row][col] == 0)
				count++;
		}
	}

	return count
}

function componentToHex(c) {
  var hex = parseInt(c).toString(16);
  return hex.length == 1 ? "0" + hex : hex;
}

function rgbToHex(r, g, b) {
  return "#" + componentToHex(r) + componentToHex(g) + componentToHex(b);
}

</script>
</body>
</html>
